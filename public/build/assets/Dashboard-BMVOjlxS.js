import{r,j as e,L as o,a as c,H as f}from"./app-BGWLi5zn.js";import{A as h}from"./AppLayout-hCk_EYsk.js";import"./iconBase-CnPFH3Kc.js";function b(){const[a,n]=r.useState([]),[d,x]=r.useState(!0),[l,i]=r.useState(!1),u=async()=>{try{const t=await c.get(route("evolution.list"));t.data.error===!1&&n(t.data.instances||[])}catch(t){console.error("Error al obtener las instancias:",t)}finally{x(!1)}};r.useEffect(()=>{u()},[]);const g=async t=>{if(confirm("¿Seguro quieres eliminar esta instancia?")){i(!0);try{await c.delete(route("evolution.destroy",t)),n(s=>s.filter(m=>m.instance_name!==t))}catch(s){console.error("Error al eliminar instancia:",s),alert("No se pudo eliminar la instancia.")}finally{i(!1)}}};return d?e.jsx("div",{className:"flex justify-center items-center p-6 text-gray-400 text-lg",children:"Cargando instancias..."}):e.jsxs("div",{className:"relative p-8 space-y-8",children:[l&&e.jsxs("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex flex-col items-center justify-center z-50",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-green-400 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-green-400 font-semibold text-lg tracking-widest",children:"Eliminando instancia..."})]}),e.jsx("h2",{className:"text-4xl font-bold text-green-400 tracking-widest text-center",children:"Instancias"}),a.length===0?e.jsx("div",{className:"flex flex-col items-center gap-6",children:e.jsx(o,{href:route("evolution.form"),className:`px-8 py-4 bg-gradient-to-br from-green-600 to-green-800 text-black rounded-3xl font-bold \r
                   shadow-[0_0_25px_rgba(34,197,94,0.4)] hover:shadow-[0_0_35px_rgba(34,197,94,0.6)] \r
                   hover:scale-[1.03] transition-all duration-300 text-lg`,children:"+ Crear instancia"})}):e.jsx("div",{className:"grid grid-cols-1 gap-10 justify-center",children:a.map(t=>e.jsxs("div",{className:`relative bg-gradient-to-br from-green-950 via-black to-green-900 \r
                     text-green-300 rounded-3xl shadow-[0_0_25px_rgba(34,197,94,0.3)] \r
                     hover:shadow-[0_0_40px_rgba(34,197,94,0.5)] \r
                     p-8 w-full max-w-3xl mx-auto flex flex-col justify-between \r
                     overflow-hidden transition-all duration-500 hover:scale-[1.02] border border-green-800/30`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-700/10 via-transparent to-transparent animate-pulse pointer-events-none"}),e.jsx("span",{className:`absolute top-5 right-5 px-3 py-1 rounded-full text-xs font-semibold 
              ${t.status==="open"?"bg-green-500 text-black":t.status==="connecting"?"bg-yellow-400 text-black":"bg-red-600 text-white"}`,children:t.status.toUpperCase()}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{className:"text-3xl font-bold tracking-widest text-green-400",children:t.instance_name})}),e.jsxs("div",{className:"mt-6 text-xl tracking-widest text-gray-300 font-mono",children:["Número: +",t.phone_number]}),e.jsxs("div",{className:"flex gap-4 mt-8",children:[e.jsx(o,{href:route("evolution.groups",{instance:t.id}),className:"flex-1 px-5 py-3 bg-green-500/90 rounded-xl text-black font-semibold hover:bg-green-400 text-center shadow-md hover:shadow-lg transition-all duration-300",children:"Grupos"}),e.jsx("button",{onClick:()=>g(t.instance_name),className:`flex-1 px-5 py-3 bg-red-700 rounded-xl text-white font-semibold \r
                         hover:bg-red-600 shadow-md hover:shadow-lg transition-all duration-300 disabled:opacity-50`,disabled:l,children:"Eliminar"})]})]},t.id))}),a.length>=1&&e.jsxs("div",{className:"text-center text-gray-400 mt-6 text-lg",children:["Solo puedes tener ",e.jsx("b",{children:"una instancia"}),". Elimina la actual para crear otra."]})]})}function w({auth:a}){return e.jsxs(h,{user:a.user,children:[e.jsx(f,{title:"Dashboard"}),e.jsx(b,{})]})}export{w as default};
