import{j as e,r as o,a as c,H as N}from"./app-BGWLi5zn.js";import{A as v}from"./AppLayout-hCk_EYsk.js";import"./iconBase-CnPFH3Kc.js";function C({isOpen:l,onClose:t,group:s}){return l?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 relative",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-green-600",children:"Contactos del Grupo"}),e.jsxs("p",{children:[e.jsx("strong",{children:"ID:"})," ",s.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nombre:"})," ",s.group_name]}),e.jsx("div",{className:"mt-4 flex justify-end gap-2",children:e.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400",children:"Cerrar"})})]})}):null}function w({groups:l=[],instance:t}){const[s,u]=o.useState(""),[d,p]=o.useState(l),[n,i]=o.useState(!1),[h,x]=o.useState(!1),[m,g]=o.useState(null),b=async r=>{if(r.preventDefault(),!s.trim())return alert("El nombre del grupo es obligatorio");try{i(!0),await c.post(`/evolution/groups/${t.id}`,{group_name:s});const{data:a}=await c.get(`/evolution/groups/${t.id}/list`);p(a.groups),u("")}catch(a){console.error("Error al crear grupo:",a),alert("Ocurrió un error al crear el grupo.")}finally{i(!1)}},f=async r=>{if(confirm("¿Seguro quieres eliminar este grupo?"))try{i(!0),await c.delete(`/evolution/groups/${r}`),p(d.filter(a=>a.id!==r))}catch(a){console.error("Error al eliminar grupo:",a),alert("Ocurrió un error al eliminar el grupo.")}finally{i(!1)}},j=r=>{g(r),x(!0)},y=()=>{g(null),x(!1)};return e.jsxs("div",{className:"relative p-6 space-y-6",children:[n&&e.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center z-50 rounded-lg",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-t-transparent border-green-400 rounded-full animate-spin"}),e.jsx("p",{className:"mt-2 text-white font-semibold",children:"Procesando..."})]})}),e.jsxs("h2",{className:"text-2xl font-bold text-green-400",children:["Grupos de la instancia: ",t.instance_name]}),e.jsxs("form",{onSubmit:b,className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Nombre del grupo",value:s,onChange:r=>u(r.target.value),disabled:n,className:"border px-3 py-2 rounded flex-1 disabled:opacity-50"}),e.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-green-500 text-black rounded disabled:opacity-50",children:"Crear"})]}),e.jsxs("div",{className:"mt-6 space-y-2",children:[d.length===0&&e.jsx("p",{className:"text-gray-400",children:"No hay grupos creados."}),d.map(r=>e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded bg-white/5",children:[e.jsx("span",{children:r.group_name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>j(r),className:"px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Contactos"}),e.jsx("button",{onClick:()=>f(r.id),disabled:n,className:"px-2 py-1 bg-red-600 text-white rounded disabled:opacity-50",children:"Eliminar"})]})]},r.id))]}),m&&e.jsx(C,{isOpen:h,onClose:y,group:m})]})}function E({auth:l,instance:t,groups:s}){return e.jsxs(v,{user:l.user,children:[e.jsx(N,{title:"Groups"}),e.jsx(w,{instance:t,groups:s})]})}export{E as default};
